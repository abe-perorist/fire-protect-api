<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÁÇé‰∏ä„É™„Çπ„ÇØÂàÜÊûê„ÉÑ„Éº„É´ - ‰ºÅÊ•≠Âêë„Åë„É™„Çπ„ÇØË®∫Êñ≠„Ç∑„Çπ„ÉÜ„É†</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@400;500;600;700&family=Noto+Sans+JP:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            /* Ê®©Â®ÅÁöÑ„Å™„Ç´„É©„Éº„Éë„É¨„ÉÉ„Éà - ÊøÉÁ¥∫„Éª„Ç∞„É¨„Éº„ÉªÁôΩÂü∫Ë™ø */
            --navy-50: #f8fafc;
            --navy-100: #f1f5f9;
            --navy-200: #e2e8f0;
            --navy-300: #cbd5e1;
            --navy-400: #94a3b8;
            --navy-500: #64748b;
            --navy-600: #475569;
            --navy-700: #334155;
            --navy-800: #1e293b;
            --navy-900: #0f172a;
            
            --deep-navy: #1a2332;
            --dark-navy: #2d3748;
            --medium-navy: #4a5568;
            --light-navy: #718096;
            --pale-navy: #a0aec0;
            
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-400: #9ca3af;
            --gray-500: #6b7280;
            --gray-600: #4b5563;
            --gray-700: #374151;
            --gray-800: #1f2937;
            --gray-900: #111827;
            
            /* Ë≠¶ÂëäËâ≤ÔºàÈôêÂÆöÁöÑ‰ΩøÁî®Ôºâ */
            --warning-500: #f59e0b;
            --warning-600: #d97706;
            --danger-500: #ef4444;
            --danger-600: #dc2626;
            --success-500: #10b981;
            --success-600: #059669;
            
            /* „Ç¢„ÇØ„Çª„É≥„Éà„Ç´„É©„Éº */
            --accent-blue: #3b82f6;
            --accent-indigo: #6366f1;
            
            /* „Çπ„Éö„Éº„Ç∑„É≥„Ç∞ */
            --space-1: 0.25rem;
            --space-2: 0.5rem;
            --space-3: 0.75rem;
            --space-4: 1rem;
            --space-5: 1.25rem;
            --space-6: 1.5rem;
            --space-8: 2rem;
            --space-10: 2.5rem;
            --space-12: 3rem;
            --space-16: 4rem;
            --space-20: 5rem;
            --space-24: 6rem;
            
            /* „Éú„Éº„ÉÄ„Éº„É©„Éá„Ç£„Ç¶„Çπ */
            --radius-sm: 0.125rem;
            --radius-md: 0.375rem;
            --radius-lg: 0.5rem;
            --radius-xl: 0.75rem;
            --radius-2xl: 1rem;
            --radius-3xl: 1.5rem;
            --radius-full: 9999px;
            
            /* „Ç∑„É£„Éâ„Ç¶ÔºàÂº±„ÇÅÔºâ */
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 2px 4px -1px rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.06);
            --shadow-lg: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -1px rgb(0 0 0 / 0.06);
            --shadow-xl: 0 8px 10px -3px rgb(0 0 0 / 0.1), 0 4px 6px -2px rgb(0 0 0 / 0.05);
            
            /* „ÉÜ„Ç≠„Çπ„Éà„Ç´„É©„Éº */
            --text-primary: var(--navy-900);
            --text-secondary: var(--navy-700);
            --text-muted: var(--navy-500);
            --text-light: var(--navy-400);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Noto Sans JP', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background: linear-gradient(135deg, var(--navy-50) 0%, var(--gray-50) 100%);
            min-height: 100vh;
            position: relative;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 80%, rgba(26, 35, 50, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(45, 55, 72, 0.03) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }
        
        /* „Ç≥„É≥„ÉÜ„Éä */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: var(--space-6);
        }
        
        /* „Éò„ÉÉ„ÉÄ„Éº */
        .header {
            text-align: center;
            margin-bottom: var(--space-12);
            padding: var(--space-8) 0;
        }
        
        .header-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto var(--space-6);
            background: linear-gradient(135deg, var(--deep-navy), var(--dark-navy));
            border-radius: var(--radius-2xl);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow-lg);
            position: relative;
        }
        
        .header-icon::before {
            content: 'üõ°Ô∏è';
            font-size: 2rem;
            filter: grayscale(100%) brightness(0) invert(1);
        }
        
        .header-title {
            font-family: 'Noto Serif JP', serif;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--deep-navy);
            margin-bottom: var(--space-2);
            letter-spacing: -0.02em;
        }
        
        .header-subtitle {
            font-size: 1.125rem;
            color: var(--text-secondary);
            font-weight: 400;
            max-width: 600px;
            margin: 0 auto;
        }
        
        /* „Ç´„Éº„Éâ„Éá„Ç∂„Ç§„É≥ */
        .card {
            background: white;
            border: 1px solid var(--navy-200);
            border-radius: var(--radius-xl);
            padding: var(--space-8);
            margin-bottom: var(--space-8);
            box-shadow: var(--shadow-sm);
            transition: all 0.3s ease;
        }
        
        .card:hover {
            box-shadow: var(--shadow-md);
            border-color: var(--navy-300);
        }
        
        .card-header {
            margin-bottom: var(--space-6);
        }
        
        .card-title {
            font-family: 'Noto Serif JP', serif;
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--deep-navy);
            margin-bottom: var(--space-2);
        }
        
        .card-subtitle {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }
        
        /* ÂÖ•Âäõ„Çª„ÇØ„Ç∑„Éß„É≥ */
        .input-section {
            position: relative;
        }
        
        .input-label {
            display: block;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--space-3);
            font-size: 1rem;
        }
        
        .input-label i {
            margin-right: var(--space-2);
            color: var(--accent-blue);
        }
        
        .text-input {
            width: 100%;
            min-height: 120px;
            padding: var(--space-4);
            border: 2px solid var(--navy-200);
            border-radius: var(--radius-lg);
            font-family: 'Noto Sans JP', sans-serif;
            font-size: 1rem;
            line-height: 1.6;
            resize: vertical;
            transition: all 0.3s ease;
            background: var(--navy-50);
        }
        
        .text-input:focus {
            outline: none;
            border-color: var(--accent-blue);
            background: white;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .char-counter {
            position: absolute;
            bottom: var(--space-2);
            right: var(--space-3);
            font-size: 0.75rem;
            color: var(--text-muted);
            background: white;
            padding: var(--space-1) var(--space-2);
            border-radius: var(--radius-sm);
            border: 1px solid var(--navy-200);
        }
        
        .char-counter.warning {
            color: var(--warning-600);
            border-color: var(--warning-500);
        }
        
        .char-counter.danger {
            color: var(--danger-600);
            border-color: var(--danger-500);
        }
        
        /* ÂàÜÊûê„Éú„Çø„É≥ */
        .analyze-btn {
            width: 100%;
            padding: var(--space-4) var(--space-6);
            background: linear-gradient(135deg, var(--deep-navy), var(--dark-navy));
            color: white;
            border: none;
            border-radius: var(--radius-lg);
            font-family: 'Noto Sans JP', sans-serif;
            font-size: 1.125rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .analyze-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .analyze-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }
        
        .analyze-btn i {
            margin-right: var(--space-2);
        }
        
        /* „É≠„Éº„Éá„Ç£„É≥„Ç∞ */
        .loading {
            display: none;
            text-align: center;
            padding: var(--space-8);
        }
        
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid var(--navy-200);
            border-top: 4px solid var(--accent-blue);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto var(--space-4);
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .loading-text {
            color: var(--text-secondary);
            font-weight: 500;
        }
        
        /* „Ç®„É©„Éº„É°„ÉÉ„Çª„Éº„Ç∏ */
        .error-message {
            display: none;
            background: #fef2f2;
            border: 1px solid #fecaca;
            color: var(--danger-600);
            padding: var(--space-4);
            border-radius: var(--radius-lg);
            margin-bottom: var(--space-6);
        }
        
        /* ÁµêÊûú„Çª„ÇØ„Ç∑„Éß„É≥ */
        .result-section {
            display: none;
        }
        
        .result-header {
            text-align: center;
            margin-bottom: var(--space-8);
        }
        
        .result-title {
            font-family: 'Noto Serif JP', serif;
            font-size: 2rem;
            font-weight: 700;
            color: var(--deep-navy);
            margin-bottom: var(--space-4);
        }
        
        /* „É™„Çπ„ÇØ„Çπ„Ç≥„Ç¢Ë°®Á§∫ */
        .risk-score-display {
            text-align: center;
            margin-bottom: var(--space-8);
        }
        
        .score-circle {
            width: 200px;
            height: 200px;
            margin: 0 auto var(--space-6);
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .score-circle svg {
            width: 100%;
            height: 100%;
            transform: rotate(-90deg);
        }
        
        .score-circle-bg {
            fill: none;
            stroke: var(--navy-200);
            stroke-width: 8;
        }
        
        .score-circle-progress {
            fill: none;
            stroke-width: 8;
            stroke-linecap: round;
            transition: stroke-dasharray 0.5s ease;
        }
        
        .score-circle-progress.low {
            stroke: var(--success-500);
        }
        
        .score-circle-progress.medium {
            stroke: var(--warning-500);
        }
        
        .score-circle-progress.high {
            stroke: var(--danger-500);
        }
        
        .score-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }
        
        .score-number {
            font-family: 'Noto Serif JP', serif;
            font-size: 3rem;
            font-weight: 700;
            color: var(--deep-navy);
            line-height: 1;
        }
        
        .score-label {
            font-size: 0.875rem;
            color: var(--text-secondary);
            font-weight: 500;
        }
        
        /* „É™„Çπ„ÇØ„É¨„Éô„É´„Éê„ÉÉ„Ç∏ */
        .risk-level-badge {
            display: inline-block;
            padding: var(--space-3) var(--space-6);
            border-radius: var(--radius-full);
            font-size: 1.125rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: var(--space-4);
        }
        
        .risk-level-badge.safe {
            background: var(--success-500);
            color: white;
        }
        
        .risk-level-badge.review {
            background: var(--warning-500);
            color: white;
        }
        
        .risk-level-badge.danger {
            background: var(--danger-500);
            color: white;
        }
        
        .risk-level-badge.critical {
            background: var(--danger-600);
            color: white;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        /* Ë©≥Á¥∞„Çπ„Ç≥„Ç¢Ë°®Á§∫ */
        .detailed-scores {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-4);
            margin-bottom: var(--space-8);
        }
        
        .score-item {
            background: var(--navy-50);
            border: 1px solid var(--navy-200);
            border-radius: var(--radius-lg);
            padding: var(--space-4);
            text-align: center;
        }
        
        .score-item-label {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: var(--space-2);
            font-weight: 500;
        }
        
        .score-item-value {
            font-family: 'Noto Serif JP', serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--deep-navy);
        }
        
        .score-item-bar {
            width: 100%;
            height: 4px;
            background: var(--navy-200);
            border-radius: var(--radius-full);
            margin-top: var(--space-2);
            overflow: hidden;
        }
        
        .score-item-progress {
            height: 100%;
            border-radius: var(--radius-full);
            transition: width 0.5s ease;
        }
        
        .score-item-progress.low {
            background: var(--success-500);
        }
        
        .score-item-progress.medium {
            background: var(--warning-500);
        }
        
        .score-item-progress.high {
            background: var(--danger-500);
        }
        
        /* Êé®Â•®‰∫ãÈ†Ö */
        .recommendations {
            margin-bottom: var(--space-8);
        }
        
        .recommendations-title {
            font-family: 'Noto Serif JP', serif;
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--deep-navy);
            margin-bottom: var(--space-4);
        }
        
        .recommendation-item {
            background: var(--navy-50);
            border-left: 4px solid var(--accent-blue);
            padding: var(--space-4);
            margin-bottom: var(--space-3);
            border-radius: 0 var(--radius-lg) var(--radius-lg) 0;
        }
        
        .recommendation-item i {
            color: var(--accent-blue);
            margin-right: var(--space-2);
        }
        
        /* ÂàÜÊûê„ÉÜ„Ç≠„Çπ„Éà */
        .analysis-text {
            background: var(--navy-50);
            border: 1px solid var(--navy-200);
            border-radius: var(--radius-lg);
            padding: var(--space-6);
            margin-bottom: var(--space-8);
            line-height: 1.8;
        }
        
        .analysis-text h3 {
            font-family: 'Noto Serif JP', serif;
            color: var(--deep-navy);
            font-size: 1.25rem;
            font-weight: 600;
            margin: var(--space-4) 0 var(--space-2) 0;
            padding-bottom: var(--space-2);
            border-bottom: 2px solid var(--navy-200);
        }
        
        .analysis-text h4 {
            color: var(--text-secondary);
            font-size: 1.125rem;
            font-weight: 600;
            margin: var(--space-3) 0 var(--space-2) 0;
        }
        
        .analysis-text p {
            margin: var(--space-2) 0;
        }
        
        .analysis-text ul {
            margin: var(--space-2) 0;
            padding-left: var(--space-6);
        }
        
        .analysis-text li {
            margin: var(--space-1) 0;
        }
        
        .analysis-text strong {
            color: var(--deep-navy);
            font-weight: 600;
        }
        
        /* Ë©≥Á¥∞ÂàÜÊûê„É¨„Éù„Éº„Éà„ÅÆ„Çπ„Çø„Ç§„É™„É≥„Ç∞ */
        .detailed-analysis-section {
            margin-top: var(--space-8);
            padding: var(--space-6);
            background: linear-gradient(135deg, var(--navy-50), var(--gray-50));
            border-radius: var(--radius-xl);
            border: 1px solid var(--navy-200);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }
        
        .detailed-analysis-section h3 {
            font-family: 'Noto Serif JP', serif;
            color: var(--deep-navy);
            font-size: 1.75rem;
            font-weight: 700;
            margin-bottom: var(--space-8);
            text-align: center;
            position: relative;
            padding: var(--space-4) 0;
        }
        
        .detailed-analysis-section h3::before {
            content: 'üìä';
            display: block;
            font-size: 2rem;
            margin-bottom: var(--space-3);
            opacity: 0.8;
        }
        
        .detailed-analysis-section h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: linear-gradient(90deg, var(--accent-blue), var(--accent-indigo));
            border-radius: var(--radius-full);
        }
        
        .analysis-section {
            background: white;
            border: 1px solid var(--navy-200);
            border-radius: var(--radius-lg);
            padding: var(--space-6);
            margin-bottom: var(--space-5);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .analysis-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(180deg, var(--accent-blue), var(--accent-indigo));
            transition: width 0.3s ease;
        }
        
        .analysis-section:hover {
            border-color: var(--accent-blue);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.15);
            transform: translateY(-2px);
        }
        
        .analysis-section:hover::before {
            width: 6px;
        }
        
        .analysis-section h4 {
            font-family: 'Noto Serif JP', serif;
            color: var(--deep-navy);
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: var(--space-4);
            padding-bottom: var(--space-3);
            border-bottom: 2px solid var(--navy-100);
            position: relative;
            display: flex;
            align-items: center;
            gap: var(--space-3);
        }
        
        .analysis-section h4::before {
            content: '';
            width: 8px;
            height: 8px;
            background: var(--accent-blue);
            border-radius: 50%;
            flex-shrink: 0;
        }
        
        .analysis-section p {
            color: var(--text-primary);
            line-height: 1.8;
            margin-bottom: var(--space-3);
            font-size: 1rem;
        }
        
        .analysis-section ul {
            margin: var(--space-4) 0;
            padding-left: 0;
            list-style: none;
        }
        
        .analysis-section li {
            color: var(--text-primary);
            margin: var(--space-3) 0;
            line-height: 1.7;
            position: relative;
            padding-left: var(--space-6);
            font-size: 1rem;
        }
        
        .analysis-section li::before {
            content: '‚ñ∂';
            position: absolute;
            left: 0;
            color: var(--accent-blue);
            font-size: 0.8rem;
            top: 0.1em;
        }
        
        .analysis-section ol {
            margin: var(--space-4) 0;
            padding-left: 0;
            counter-reset: item;
        }
        
        .analysis-section ol li {
            color: var(--text-primary);
            margin: var(--space-3) 0;
            line-height: 1.7;
            position: relative;
            padding-left: var(--space-8);
            counter-increment: item;
            font-size: 1rem;
        }
        
        .analysis-section ol li::before {
            content: counter(item);
            position: absolute;
            left: 0;
            top: 0;
            background: var(--accent-blue);
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .analysis-section.conclusion {
            background: white;
            border: 2px solid var(--accent-blue);
            position: relative;
            overflow: hidden;
        }
        
        .analysis-section.conclusion::before {
            background: var(--accent-blue);
            width: 6px;
        }
        
        .analysis-section.conclusion::after {
            content: 'üéØ';
            position: absolute;
            top: var(--space-4);
            right: var(--space-4);
            font-size: 1.5rem;
            opacity: 0.3;
        }
        
        .analysis-section.conclusion h4 {
            color: var(--accent-blue);
            border-bottom-color: var(--accent-blue);
        }
        
        .analysis-section.conclusion h4::before {
            background: var(--accent-blue);
            width: 10px;
            height: 10px;
        }
        
        .analysis-section.conclusion p {
            color: var(--text-primary);
            font-size: 1.05rem;
            line-height: 1.8;
            font-weight: 500;
        }
        
        .analysis-section.conclusion:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.2);
            border-color: var(--accent-indigo);
        }
        
        /* Èñ¢ÈÄ£‰∫ã‰æã */
        .related-cases {
            margin-bottom: var(--space-8);
        }
        
        .related-cases-title {
            font-family: 'Noto Serif JP', serif;
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--deep-navy);
            margin-bottom: var(--space-4);
        }
        
        .case-item {
            background: white;
            border: 1px solid var(--navy-200);
            border-radius: var(--radius-lg);
            padding: var(--space-4);
            margin-bottom: var(--space-3);
            transition: all 0.3s ease;
        }
        
        .case-item:hover {
            border-color: var(--navy-300);
            box-shadow: var(--shadow-sm);
        }
        
        .case-title {
            font-weight: 600;
            color: var(--deep-navy);
            margin-bottom: var(--space-2);
        }
        
        .case-meta {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: var(--space-2);
        }
        
        .case-description {
            color: var(--text-primary);
            line-height: 1.6;
        }
        
        /* „Éï„ÉÉ„Çø„Éº */
        .footer {
            text-align: center;
            padding: var(--space-8) 0;
            border-top: 1px solid var(--navy-200);
            margin-top: var(--space-12);
            color: var(--text-secondary);
        }
        
        .footer-brand {
            font-family: 'Noto Serif JP', serif;
            font-weight: 600;
            color: var(--deep-navy);
            margin-bottom: var(--space-2);
        }
        
        .footer-version {
            font-size: 0.875rem;
            color: var(--text-muted);
        }
        
        /* „É¨„Çπ„Éù„É≥„Ç∑„Éñ„Éá„Ç∂„Ç§„É≥ */
        @media (max-width: 768px) {
            .container {
                padding: var(--space-4);
            }
            
            .header-title {
                font-size: 2rem;
            }
            
            .card {
                padding: var(--space-6);
            }
            
            .score-circle {
                width: 150px;
                height: 150px;
            }
            
            .score-number {
                font-size: 2rem;
            }
            
            .detailed-scores {
                grid-template-columns: 1fr;
            }
        }
        
        /* „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ */
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* „Çπ„ÇØ„É≠„Éº„É´„Éê„Éº„ÅÆ„Ç´„Çπ„Çø„Éû„Ç§„Ç∫ */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: var(--navy-100);
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--navy-400);
            border-radius: var(--radius-full);
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--navy-500);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- „Éò„ÉÉ„ÉÄ„Éº -->
        <header class="header">
            <div class="header-icon"></div>
            <h1 class="header-title">ÁÇé‰∏ä„É™„Çπ„ÇØÂàÜÊûê„ÉÑ„Éº„É´</h1>
            <p class="header-subtitle">‰ºÅÊ•≠Âêë„Åë„É™„Çπ„ÇØË®∫Êñ≠„Ç∑„Çπ„ÉÜ„É† - ÊäïÁ®øÂâç„ÅÆ„É™„Çπ„ÇØ„ÇíÁßëÂ≠¶ÁöÑ„Å´ÂàÜÊûê„Åó„ÄÅÈÅ©Âàá„Å™ÂØæÂøúÁ≠ñ„ÇíÊèêÊ°à„Åó„Åæ„Åô</p>
        </header>

        <!-- ÂÖ•Âäõ„Çª„ÇØ„Ç∑„Éß„É≥ -->
        <div class="card input-section">
            <div class="card-header">
                <h2 class="card-title">ÂàÜÊûêÂØæË±°„ÉÜ„Ç≠„Çπ„Éà</h2>
                <p class="card-subtitle">ÊäïÁ®ø‰∫àÂÆö„ÅÆ„ÉÜ„Ç≠„Çπ„Éà„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºàÊúÄÂ§ß1000ÊñáÂ≠óÔºâ</p>
            </div>
            
            <label for="textInput" class="input-label">
                <i class="fas fa-edit"></i>
                „ÉÜ„Ç≠„Çπ„ÉàÂÖ•Âäõ
            </label>
            <textarea 
                id="textInput" 
                class="text-input" 
                placeholder="ÂàÜÊûê„Åó„Åü„ÅÑ„ÉÜ„Ç≠„Çπ„Éà„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ..."
                maxlength="1000"
            ></textarea>
            <div class="char-counter" id="charCounter">0 / 1000</div>
            
            <button id="analyzeBtn" class="analyze-btn">
                <i class="fas fa-shield-alt"></i>
                „É™„Çπ„ÇØÂàÜÊûê„ÇíÂÆüË°å
            </button>
        </div>

        <!-- „É≠„Éº„Éá„Ç£„É≥„Ç∞ -->
        <div class="loading" id="loading">
            <div class="loading-spinner"></div>
            <p class="loading-text">AIÂàÜÊûê„ÇíÂÆüË°å‰∏≠„Åß„Åô...</p>
        </div>

        <!-- „Ç®„É©„Éº„É°„ÉÉ„Çª„Éº„Ç∏ -->
        <div class="error-message" id="errorMessage"></div>

        <!-- ÁµêÊûú„Çª„ÇØ„Ç∑„Éß„É≥ -->
        <div class="result-section" id="resultSection">
            <div class="result-header">
                <h2 class="result-title">ÂàÜÊûêÁµêÊûú</h2>
            </div>

            <!-- „É™„Çπ„ÇØ„Çπ„Ç≥„Ç¢Ë°®Á§∫ -->
            <div class="card risk-score-display">
                <div class="score-circle" id="scoreCircle">
                    <svg viewBox="0 0 100 100">
                        <circle class="score-circle-bg" cx="50" cy="50" r="40"></circle>
                        <circle class="score-circle-progress" cx="50" cy="50" r="40" id="scoreProgress"></circle>
                    </svg>
                    <div class="score-text">
                        <div class="score-number" id="scoreNumber">0</div>
                        <div class="score-label">„É™„Çπ„ÇØ„Çπ„Ç≥„Ç¢</div>
                    </div>
                </div>
                
                <div class="risk-level-badge" id="riskLevelBadge">ÂàÜÊûê‰∏≠</div>
                <p id="riskDescription">ÂàÜÊûêÁµêÊûú„Å´Âü∫„Å•„Åè„É™„Çπ„ÇØË©ï‰æ°</p>
            </div>

            <!-- Ë©≥Á¥∞„Çπ„Ç≥„Ç¢ -->
            <div class="card">
                <h3 class="card-title">Ë©≥Á¥∞ÂàÜÊûêÁµêÊûú</h3>
                <div class="detailed-scores" id="detailedScores">
                    <!-- JavaScript „ÅßÂãïÁöÑÁîüÊàê -->
                </div>
            </div>

            <!-- Êé®Â•®‰∫ãÈ†Ö -->
            <div class="card recommendations">
                <h3 class="recommendations-title">Êé®Â•®‰∫ãÈ†Ö</h3>
                <div id="recommendationsList">
                    <!-- JavaScript „ÅßÂãïÁöÑÁîüÊàê -->
                </div>
            </div>

            <!-- ÂàÜÊûê„ÉÜ„Ç≠„Çπ„Éà -->
            <div class="card">
                <h3 class="card-title">Ë©≥Á¥∞ÂàÜÊûê„É¨„Éù„Éº„Éà</h3>
                <div class="analysis-text" id="analysisText">
                    <!-- JavaScript „ÅßÂãïÁöÑÁîüÊàê -->
                </div>
            </div>

            <!-- Èñ¢ÈÄ£‰∫ã‰æã -->
            <div class="card related-cases">
                <h3 class="related-cases-title" id="relatedCasesTitle">Èñ¢ÈÄ£„Åô„ÇãÁÇé‰∏ä‰∫ã‰æã</h3>
                <div id="relatedCasesList">
                    <!-- JavaScript „ÅßÂãïÁöÑÁîüÊàê -->
                </div>
            </div>
        </div>
    </div>

    <!-- „Éï„ÉÉ„Çø„Éº -->
    <footer class="footer">
        <div class="footer-brand">„É™„Çπ„ÇØÂàÜÊûê„É©„Éú</div>
        <div class="footer-version">Version 2.0.0 - ‰ºÅÊ•≠Âêë„Åë„É™„Çπ„ÇØË®∫Êñ≠„Ç∑„Çπ„ÉÜ„É†</div>
    </footer>

    <script>
        // DOMË¶ÅÁ¥†„ÅÆÂèñÂæó
        const textInput = document.getElementById('textInput');
        const charCounter = document.getElementById('charCounter');
        const analyzeBtn = document.getElementById('analyzeBtn');
        const loading = document.getElementById('loading');
        const errorMessage = document.getElementById('errorMessage');
        const resultSection = document.getElementById('resultSection');
        const scoreCircle = document.getElementById('scoreCircle');
        const scoreProgress = document.getElementById('scoreProgress');
        const scoreNumber = document.getElementById('scoreNumber');
        const riskLevelBadge = document.getElementById('riskLevelBadge');
        const riskDescription = document.getElementById('riskDescription');
        const detailedScores = document.getElementById('detailedScores');
        const recommendationsList = document.getElementById('recommendationsList');
        const analysisText = document.getElementById('analysisText');
        const relatedCasesList = document.getElementById('relatedCasesList');
        const relatedCasesTitle = document.getElementById('relatedCasesTitle');

        // ÊñáÂ≠óÊï∞„Ç´„Ç¶„É≥„Çø„Éº
        textInput.addEventListener('input', function() {
            const length = this.value.length;
            charCounter.textContent = `${length} / 1000`;
            
            if (length > 800) {
                charCounter.className = 'char-counter danger';
            } else if (length > 600) {
                charCounter.className = 'char-counter warning';
            } else {
                charCounter.className = 'char-counter';
            }
        });

        // „É≠„Éº„Éá„Ç£„É≥„Ç∞Áä∂ÊÖã„ÅÆÁÆ°ÁêÜ
        function setLoading(isLoading) {
            if (isLoading) {
                loading.style.display = 'block';
                analyzeBtn.disabled = true;
                analyzeBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ÂàÜÊûê‰∏≠...';
            } else {
                loading.style.display = 'none';
                analyzeBtn.disabled = false;
                analyzeBtn.innerHTML = '<i class="fas fa-shield-alt"></i> „É™„Çπ„ÇØÂàÜÊûê„ÇíÂÆüË°å';
            }
        }

        // „Ç®„É©„Éº„É°„ÉÉ„Çª„Éº„Ç∏„ÅÆË°®Á§∫
        function showError(message) {
            errorMessage.textContent = message;
            errorMessage.style.display = 'block';
        }

        function hideError() {
            errorMessage.style.display = 'none';
        }

        // ÁµêÊûú„ÅÆÈùûË°®Á§∫
        function hideResult() {
            resultSection.style.display = 'none';
        }

        // ÂÜÜÂΩ¢„Éó„É≠„Ç∞„É¨„Çπ„Éê„Éº„ÅÆÊõ¥Êñ∞
        function updateScoreCircle(score) {
            const circumference = 2 * Math.PI * 40;
            const progress = (score / 100) * circumference;
            
            scoreProgress.style.strokeDasharray = `${progress} ${circumference}`;
            scoreNumber.textContent = score;
            
            // „Çπ„Ç≥„Ç¢„Å´Âøú„Åò„Å¶Ëâ≤„ÇíÂ§âÊõ¥
            scoreProgress.className = 'score-circle-progress';
            if (score >= 70) {
                scoreProgress.classList.add('high');
            } else if (score >= 40) {
                scoreProgress.classList.add('medium');
            } else {
                scoreProgress.classList.add('low');
            }
        }

        // Ë©≥Á¥∞„Çπ„Ç≥„Ç¢„ÅÆË°®Á§∫
        function displayDetailedScores(riskScore) {
            // „Ç∑„É≥„Éó„É´Áâà„Åß„ÅØÂü∫Êú¨ÁöÑ„Å™„Çπ„Ç≥„Ç¢„ÅÆ„ÅøË°®Á§∫
            const scores = [
                { label: 'Á∑èÂêà„É™„Çπ„ÇØ', value: riskScore.overall_score, color: getScoreColor(riskScore.overall_score) },
                { label: '‰ø°È†ºÂ∫¶', value: Math.round(riskScore.confidence * 100), color: 'low' }
            ];

            detailedScores.innerHTML = scores.map(score => `
                <div class="score-item">
                    <div class="score-item-label">${score.label}</div>
                    <div class="score-item-value">${score.value}${score.label === '‰ø°È†ºÂ∫¶' ? '%' : ''}</div>
                    <div class="score-item-bar">
                        <div class="score-item-progress ${score.color}" style="width: ${score.value}%"></div>
                    </div>
                </div>
            `).join('');
        }

        // „Çπ„Ç≥„Ç¢„Å´Âøú„Åò„ÅüËâ≤„ÅÆÂèñÂæó
        function getScoreColor(score) {
            if (score >= 70) return 'high';
            if (score >= 40) return 'medium';
            return 'low';
        }

        // „É™„Çπ„ÇØ„É¨„Éô„É´„ÅÆË°®Á§∫
        function displayRiskLevel(riskLevel, recommendation) {
            riskLevelBadge.textContent = riskLevel;
            riskLevelBadge.className = 'risk-level-badge';
            
            if (riskLevel === 'ÊäïÁ®øÂèØ') {
                riskLevelBadge.classList.add('safe');
                riskDescription.textContent = 'ÂÆâÂÖ®„Å´ÊäïÁ®ø„Åß„Åç„Åæ„Åô';
            } else if (riskLevel === 'Ë¶Å„É¨„Éì„É•„Éº') {
                riskLevelBadge.classList.add('review');
                riskDescription.textContent = 'ÊäïÁ®øÂâç„ÅÆË¶ãÁõ¥„Åó„ÅåÂøÖË¶Å„Åß„Åô';
            } else if (riskLevel === 'ÊäïÁ®øÂç±Èô∫') {
                riskLevelBadge.classList.add('danger');
                riskDescription.textContent = 'ÊäïÁ®ø„ÅØÂç±Èô∫„Åß„Åô';
            } else if (riskLevel === 'Âç≥ÊôÇÂÅúÊ≠¢') {
                riskLevelBadge.classList.add('critical');
                riskDescription.textContent = 'Áõ¥„Å°„Å´ÊäïÁ®ø„Çí‰∏≠Ê≠¢„Åó„Å¶„Åè„Å†„Åï„ÅÑ';
            }
        }

        // Êé®Â•®‰∫ãÈ†Ö„ÅÆË°®Á§∫
        function displayRecommendations(recommendations) {
            recommendationsList.innerHTML = recommendations.map(rec => `
                <div class="recommendation-item">
                    <i class="fas fa-check-circle"></i>
                    ${rec}
                </div>
            `).join('');
        }

        // ÂàÜÊûê„ÉÜ„Ç≠„Çπ„Éà„ÅÆË°®Á§∫
        function displayAnalysisText(text, riskScore, relatedCases) {
            // Êó¢Â≠ò„ÅÆÂàÜÊûê„ÉÜ„Ç≠„Çπ„Éà„ÇíË°®Á§∫
            let html = convertMarkdownToHtml(text);
            
            // „Çà„ÇäË©≥Á¥∞„Å™ÂàÜÊûê„É¨„Éù„Éº„Éà„ÇíËøΩÂä†
            html += generateDetailedAnalysisReport(text, riskScore, relatedCases);
            
            analysisText.innerHTML = html;
        }

        // Ë©≥Á¥∞ÂàÜÊûê„É¨„Éù„Éº„Éà„ÅÆÁîüÊàê
        function generateDetailedAnalysisReport(originalText, riskScore, relatedCases) {
            // „É™„Çπ„ÇØ„Çπ„Ç≥„Ç¢„Å´Âü∫„Å•„ÅèË©≥Á¥∞ÂàÜÊûê
            const overallRisk = getDetailedRiskAssessment(riskScore);
            const contentRisk = getContentRiskAnalysis(originalText, riskScore);
            const legalRisk = getLegalRiskAnalysis(originalText, riskScore);
            const brandRisk = getBrandRiskAnalysis(originalText, riskScore);
            const socialRisk = getSocialRiskAnalysis(originalText, riskScore);
            const riskFactors = analyzeRiskFactors(originalText, riskScore);
            const comparison = getCaseComparison(relatedCases);
            
            return `
                <div class="detailed-analysis-section">
                    <h3>Ë©≥Á¥∞„É™„Çπ„ÇØÂàÜÊûê„É¨„Éù„Éº„Éà</h3>
                    
                    <div class="analysis-section">
                        <h4>Á∑èÂêà„É™„Çπ„ÇØË©ï‰æ°</h4>
                        <p>${overallRisk}</p>
                    </div>
                    
                    <div class="analysis-section">
                        <h4>ÂéüÂõ†„Ç´„ÉÜ„Ç¥„É™</h4>
                        <p><strong>${riskScore.category}</strong> - ${getCategoryExplanation(riskScore.category)}</p>
                    </div>
                    
                    <div class="analysis-section">
                        <h4>„É™„Çπ„ÇØË¶ÅÂõ†</h4>
                        <ul>
                            ${riskFactors.map(factor => `<li>${factor}</li>`).join('')}
                        </ul>
                    </div>
                    
                    <div class="analysis-section">
                        <h4>„Ç≥„É≥„ÉÜ„É≥„ÉÑ„É™„Çπ„ÇØÂàÜÊûê</h4>
                        <p>${contentRisk}</p>
                    </div>
                    
                    <div class="analysis-section">
                        <h4>Ê≥ïÁöÑ„É™„Çπ„ÇØÂàÜÊûê</h4>
                        <p>${legalRisk}</p>
                    </div>
                    
                    <div class="analysis-section">
                        <h4>„Éñ„É©„É≥„Éâ„É™„Çπ„ÇØÂàÜÊûê</h4>
                        <p>${brandRisk}</p>
                    </div>
                    
                    <div class="analysis-section">
                        <h4>Á§æ‰ºöÁöÑ„É™„Çπ„ÇØÂàÜÊûê</h4>
                        <p>${socialRisk}</p>
                    </div>
                    
                    <div class="analysis-section">
                        <h4>È°û‰ºº‰∫ã‰æã„Å®„ÅÆÊØîËºÉ</h4>
                        <p>${comparison}</p>
                    </div>
                    
                    <div class="analysis-section">
                        <h4>‰øÆÊ≠£Ê°à</h4>
                        <p>${getRevisionSuggestion(originalText, riskScore)}</p>
                    </div>
                    
                    <div class="analysis-section">
                        <h4>ÊîπÂñÑÊèêÊ°à</h4>
                        <ol>
                            <li><strong>ÊäïÁ®ø„ÅÆÂâäÈô§:</strong> Áõ¥„Å°„Å´ÊäïÁ®ø„ÇíÂâäÈô§„Åó„ÄÅÂÜçÁô∫Èò≤Ê≠¢Á≠ñ„ÇíË¨õ„Åò„Åæ„Åô„ÄÇ</li>
                            <li><strong>Ë¨ùÁΩ™Êñá„ÅÆÁô∫Ë°®:</strong> Èñ¢‰øÇËÄÖ„Å∏„ÅÆË¨ùÁΩ™„Å®„ÄÅ‰∏çÈÅ©Âàá„Å™Ë°®Áèæ„ÇíÊ∑±„ÅèÂèçÁúÅ„Åó„Å¶„ÅÑ„ÇãÊó®„ÇíÊòéÁ¢∫„Å´Ë®ò„Åó„ÅüË¨ùÁΩ™Êñá„ÇíÂÖ¨Èñã„Åó„Åæ„Åô„ÄÇ</li>
                            <li><strong>ÂÜçÁô∫Èò≤Ê≠¢Á≠ñ„ÅÆÁ≠ñÂÆö:</strong> Á§æÂÜÖË¶èÂÆö„ÅÆË¶ãÁõ¥„Åó„ÄÅÁ§æÂì°ÊïôËÇ≤„ÅÆÂº∑Âåñ„Å™„Å©„ÄÅ‰∏çÈÅ©Âàá„Å™Ë°®Áèæ„ÇíÂê´„ÇÄÊäïÁ®ø„ÇíÈò≤„Åê„Åü„ÇÅ„ÅÆÂÖ∑‰ΩìÁöÑ„Å™ÂØæÁ≠ñ„ÇíË¨õ„Åò„Åæ„Åô„ÄÇ</li>
                            <li><strong>„É¢„Éã„Çø„É™„É≥„Ç∞‰ΩìÂà∂„ÅÆÂº∑Âåñ:</strong> SNSÁ≠â„Åß„ÅÆÁô∫Ë®Ä„ÇíÁõ£Ë¶ñ„Åó„ÄÅÂïèÈ°å„ÅÆ„ÅÇ„ÇãÊäïÁ®ø„ÇíÊó©Êúü„Å´Áô∫Ë¶ã„ÉªÂØæÂøú„Åß„Åç„Çã‰ΩìÂà∂„ÇíÊï¥„Åà„Åæ„Åô„ÄÇ</li>
                            <li><strong>Â∞ÇÈñÄÂÆ∂„Å∏„ÅÆÁõ∏Ë´á:</strong> ÂøÖË¶Å„Å´Âøú„Åò„Å¶„ÄÅÂºÅË≠∑Â£´„ÇÑPRÂ∞ÇÈñÄÂÆ∂„Å™„Å©„Å´Áõ∏Ë´á„Åó„ÄÅÈÅ©Âàá„Å™ÂØæÂøú„ÇíË°å„ÅÑ„Åæ„Åô„ÄÇ</li>
                        </ol>
                    </div>
                    
                    <div class="analysis-section conclusion">
                        <h4>ÁµêË´ñ</h4>
                        <p>${getConclusion(riskScore)}</p>
                    </div>
                </div>
            `;
        }

        // „ÉÜ„Ç≠„Çπ„Éà„Åã„Çâ„Ç≠„Éº„ÉØ„Éº„Éâ„ÇíÊäΩÂá∫
        function extractKeywordsFromText(text) {
            const keywords = [];
            const highRiskWords = ['Â∑ÆÂà•', 'ÊîªÊíÉ', 'Êö¥ÂäõÁöÑ', '‰∏çÈÅ©Âàá', 'Ë™πË¨ó', '‰∏≠ÂÇ∑', '‰æÆËæ±'];
            const mediumRiskWords = ['ÂïèÈ°å', 'Êá∏Âøµ', '„É™„Çπ„ÇØ', 'Âç±Èô∫', 'Ê≥®ÊÑè'];
            
            highRiskWords.forEach(word => {
                if (text.includes(word)) {
                    keywords.push({ word, level: 'high' });
                }
            });
            
            mediumRiskWords.forEach(word => {
                if (text.includes(word)) {
                    keywords.push({ word, level: 'medium' });
                }
            });
            
            return keywords;
        }

        // Á∑èÂêà„É™„Çπ„ÇØË©ï‰æ°„ÅÆË©≥Á¥∞ÂàÜÊûê
        function getDetailedRiskAssessment(riskScore) {
            const overall = riskScore.overall_score;
            const confidence = riskScore.confidence;
            
            if (overall >= 80) {
                return `Á∑èÂêà„Çπ„Ç≥„Ç¢${overall}/100„ÅØÊ•µ„ÇÅ„Å¶È´ò„ÅÑ„É™„Çπ„ÇØ„ÇíÁ§∫„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇÂàÜÊûê‰ø°È†ºÂ∫¶${confidence}%„Å´Âü∫„Å•„Åç„ÄÅÂç≥Â∫ß„ÅÆÂØæÂøú„ÅåÂøÖË¶Å„Åß„Åô„ÄÇÊäïÁ®ø„ÅØÁÇé‰∏äÊã°Êï£„ÅÆÂèØËÉΩÊÄß„ÅåÈùûÂ∏∏„Å´È´ò„Åè„ÄÅ‰ºÅÊ•≠„ÅÆ‰ø°È†ºÊÄß„Å´Ê∑±Âàª„Å™ÂΩ±Èüø„Çí‰∏é„Åà„ÇãÂç±Èô∫ÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ`;
            } else if (overall >= 60) {
                return `Á∑èÂêà„Çπ„Ç≥„Ç¢${overall}/100„ÅØÈ´ò„ÅÑ„É™„Çπ„ÇØ„ÇíÁ§∫„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇÂàÜÊûê‰ø°È†ºÂ∫¶${confidence}%„Å´Âü∫„Å•„Åç„ÄÅÊÖéÈáç„Å™Ê§úË®é„Å®ÈÅ©Âàá„Å™ÂØæÂøú„ÅåÊ±Ç„ÇÅ„Çâ„Çå„Åæ„Åô„ÄÇÊäïÁ®øÂâç„Å´ÂÜÖÂÆπ„ÅÆË¶ãÁõ¥„Åó„ÇíÂº∑„ÅèÊé®Â•®„Åó„Åæ„Åô„ÄÇ`;
            } else if (overall >= 40) {
                return `Á∑èÂêà„Çπ„Ç≥„Ç¢${overall}/100„ÅØ‰∏≠Á®ãÂ∫¶„ÅÆ„É™„Çπ„ÇØ„ÇíÁ§∫„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇÂàÜÊûê‰ø°È†ºÂ∫¶${confidence}%„Å´Âü∫„Å•„Åç„ÄÅ‰∏ÄÈÉ®„ÅÆË°®Áèæ„Å´Ê≥®ÊÑè„ÅåÂøÖË¶Å„Åß„Åô„ÄÇÊäïÁ®øÂâç„Å´ËªΩÂæÆ„Å™‰øÆÊ≠£„ÇíÊ§úË®é„Åô„Çã„Åì„Å®„Çí„ÅäÂãß„ÇÅ„Åó„Åæ„Åô„ÄÇ`;
            } else {
                return `Á∑èÂêà„Çπ„Ç≥„Ç¢${overall}/100„ÅØ‰Ωé„ÅÑ„É™„Çπ„ÇØ„ÇíÁ§∫„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇÂàÜÊûê‰ø°È†ºÂ∫¶${confidence}%„Å´Âü∫„Å•„Åç„ÄÅÁèæÁä∂„Åß„ÅØÂ§ß„Åç„Å™ÂïèÈ°å„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„Åå„ÄÅÁ∂ôÁ∂öÁöÑ„Å™„É¢„Éã„Çø„É™„É≥„Ç∞„ÅåÈáçË¶Å„Åß„Åô„ÄÇ`;
            }
        }

        // „Ç≥„É≥„ÉÜ„É≥„ÉÑ„É™„Çπ„ÇØÂàÜÊûê
        function getContentRiskAnalysis(text, riskScore) {
            const contentRisk = riskScore.content_risk;
            const issues = [];
            
            if (text.includes('Â∑ÆÂà•') || text.includes('ÂÅèË¶ã')) {
                issues.push('Â∑ÆÂà•ÁöÑË°®Áèæ„ÅåÂê´„Åæ„Çå„Å¶„ÅÑ„Åæ„Åô');
            }
            if (text.includes('ÊîªÊíÉ') || text.includes('Êö¥ÂäõÁöÑ')) {
                issues.push('ÊîªÊíÉÁöÑ„Åæ„Åü„ÅØÊö¥ÂäõÁöÑ„Å™Ë°®Áèæ„ÅåÂê´„Åæ„Çå„Å¶„ÅÑ„Åæ„Åô');
            }
            if (text.includes('‰∏çÈÅ©Âàá') || text.includes('ÂïèÈ°å')) {
                issues.push('‰∏çÈÅ©Âàá„Å™Ë°®Áèæ„ÅåÂê´„Åæ„Çå„Å¶„ÅÑ„Åæ„Åô');
            }
            if (text.includes('Ë™πË¨ó') || text.includes('‰∏≠ÂÇ∑')) {
                issues.push('Ë™πË¨ó‰∏≠ÂÇ∑„ÅÆÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô');
            }
            
            if (contentRisk >= 80) {
                return `„Ç≥„É≥„ÉÜ„É≥„ÉÑ„É™„Çπ„ÇØ„Çπ„Ç≥„Ç¢${contentRisk}/100„ÅØÊ•µ„ÇÅ„Å¶È´ò„ÅÑÂç±Èô∫ÊÄß„ÇíÁ§∫„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ${issues.length > 0 ? issues.join('„ÄÅ') + '„ÄÇ' : ''}ÊäïÁ®øÂÜÖÂÆπ„ÅØÁ§æ‰ºöÁöÑ„Å´ÂïèÈ°å„Å®„Å™„ÇãÂèØËÉΩÊÄß„ÅåÈùûÂ∏∏„Å´È´ò„Åè„ÄÅÂç≥Â∫ß„ÅÆ‰øÆÊ≠£„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ`;
            } else if (contentRisk >= 60) {
                return `„Ç≥„É≥„ÉÜ„É≥„ÉÑ„É™„Çπ„ÇØ„Çπ„Ç≥„Ç¢${contentRisk}/100„ÅØÈ´ò„ÅÑÂç±Èô∫ÊÄß„ÇíÁ§∫„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ${issues.length > 0 ? issues.join('„ÄÅ') + '„ÄÇ' : ''}Ë°®Áèæ„ÅÆË¶ãÁõ¥„Åó„ÇíÂº∑„ÅèÊé®Â•®„Åó„Åæ„Åô„ÄÇ`;
            } else if (contentRisk >= 40) {
                return `„Ç≥„É≥„ÉÜ„É≥„ÉÑ„É™„Çπ„ÇØ„Çπ„Ç≥„Ç¢${contentRisk}/100„ÅØ‰∏≠Á®ãÂ∫¶„ÅÆÂç±Èô∫ÊÄß„ÇíÁ§∫„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ${issues.length > 0 ? issues.join('„ÄÅ') + '„ÄÇ' : ''}‰∏ÄÈÉ®„ÅÆË°®Áèæ„Å´Ê≥®ÊÑè„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ`;
            } else {
                return `„Ç≥„É≥„ÉÜ„É≥„ÉÑ„É™„Çπ„ÇØ„Çπ„Ç≥„Ç¢${contentRisk}/100„ÅØ‰Ωé„ÅÑÂç±Èô∫ÊÄß„ÇíÁ§∫„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇÁèæÁä∂„Åß„ÅØÂ§ß„Åç„Å™ÂïèÈ°å„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„Åå„ÄÅË°®Áèæ„ÅÆÈÅ©ÂàáÊÄß„ÇíÁ∂ôÁ∂öÁöÑ„Å´Á¢∫Ë™ç„Åô„Çã„Åì„Å®„ÅåÈáçË¶Å„Åß„Åô„ÄÇ`;
            }
        }

        // Ê≥ïÁöÑ„É™„Çπ„ÇØÂàÜÊûê
        function getLegalRiskAnalysis(text, riskScore) {
            const legalRisk = riskScore.legal_risk;
            const legalIssues = [];
            
            if (text.includes('ÂêçË™â') || text.includes('‰æÆËæ±')) {
                legalIssues.push('ÂêçË™âÊØÄÊêç„ÇÑ‰æÆËæ±ÁΩ™„ÅÆÂèØËÉΩÊÄß');
            }
            if (text.includes('Â∑ÆÂà•') || text.includes('ÂÅèË¶ã')) {
                legalIssues.push('Â∑ÆÂà•Á¶ÅÊ≠¢Ê≥ïÈÅïÂèç„ÅÆÂèØËÉΩÊÄß');
            }
            if (text.includes('ÂÄã‰∫∫ÊÉÖÂ†±') || text.includes('„Éó„É©„Ç§„Éê„Ç∑„Éº')) {
                legalIssues.push('ÂÄã‰∫∫ÊÉÖÂ†±‰øùË≠∑Ê≥ïÈÅïÂèç„ÅÆÂèØËÉΩÊÄß');
            }
            
            if (legalRisk >= 80) {
                return `Ê≥ïÁöÑ„É™„Çπ„ÇØ„Çπ„Ç≥„Ç¢${legalRisk}/100„ÅØÊ•µ„ÇÅ„Å¶È´ò„ÅÑÊ≥ïÁöÑË≤¨‰ªª„ÅÆÂèØËÉΩÊÄß„ÇíÁ§∫„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ${legalIssues.length > 0 ? legalIssues.join('„ÄÅ') + '„ÅåÊá∏Âøµ„Åï„Çå„Åæ„Åô„ÄÇ' : ''}Ê≥ïÂãôÈÉ®ÈñÄ„Å®„ÅÆÁ∑äÊÄ•Áõ∏Ë´á„ÇíÂº∑„ÅèÊé®Â•®„Åó„Åæ„Åô„ÄÇ`;
            } else if (legalRisk >= 60) {
                return `Ê≥ïÁöÑ„É™„Çπ„ÇØ„Çπ„Ç≥„Ç¢${legalRisk}/100„ÅØÈ´ò„ÅÑÊ≥ïÁöÑË≤¨‰ªª„ÅÆÂèØËÉΩÊÄß„ÇíÁ§∫„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ${legalIssues.length > 0 ? legalIssues.join('„ÄÅ') + '„ÅåÊá∏Âøµ„Åï„Çå„Åæ„Åô„ÄÇ' : ''}ÊäïÁ®øÂâç„ÅÆÊ≥ïÂãôÁ¢∫Ë™ç„ÇíÊé®Â•®„Åó„Åæ„Åô„ÄÇ`;
            } else if (legalRisk >= 40) {
                return `Ê≥ïÁöÑ„É™„Çπ„ÇØ„Çπ„Ç≥„Ç¢${legalRisk}/100„ÅØ‰∏≠Á®ãÂ∫¶„ÅÆÊ≥ïÁöÑË≤¨‰ªª„ÅÆÂèØËÉΩÊÄß„ÇíÁ§∫„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ${legalIssues.length > 0 ? legalIssues.join('„ÄÅ') + '„Å´Ê≥®ÊÑè„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ' : ''}Á∂ôÁ∂öÁöÑ„Å™Ê≥ïÂãôÁõ£Ë¶ñ„ÅåÈáçË¶Å„Åß„Åô„ÄÇ`;
            } else {
                return `Ê≥ïÁöÑ„É™„Çπ„ÇØ„Çπ„Ç≥„Ç¢${legalRisk}/100„ÅØ‰Ωé„ÅÑÊ≥ïÁöÑË≤¨‰ªª„ÅÆÂèØËÉΩÊÄß„ÇíÁ§∫„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇÁèæÁä∂„Åß„ÅØÂ§ß„Åç„Å™Ê≥ïÁöÑÂïèÈ°å„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„Åå„ÄÅÊ≥ïÁöÑ„Ç≥„É≥„Éó„É©„Ç§„Ç¢„É≥„Çπ„ÅÆÁ∂ôÁ∂öÁöÑ„Å™Á¢∫Ë™ç„ÅåÈáçË¶Å„Åß„Åô„ÄÇ`;
            }
        }

        // „Éñ„É©„É≥„Éâ„É™„Çπ„ÇØÂàÜÊûê
        function getBrandRiskAnalysis(text, riskScore) {
            const brandRisk = riskScore.brand_risk;
            const brandIssues = [];
            
            if (text.includes('‰ºÅÊ•≠') || text.includes('‰ºöÁ§æ')) {
                brandIssues.push('‰ºÅÊ•≠„Ç§„É°„Éº„Ç∏„Å∏„ÅÆÁõ¥Êé•ÁöÑ„Å™ÂΩ±Èüø');
            }
            if (text.includes('È°ßÂÆ¢') || text.includes('„ÅäÂÆ¢Êßò')) {
                brandIssues.push('È°ßÂÆ¢Èñ¢‰øÇ„Å∏„ÅÆÂΩ±Èüø');
            }
            if (text.includes('„Éñ„É©„É≥„Éâ') || text.includes('‰ø°È†º')) {
                brandIssues.push('„Éñ„É©„É≥„Éâ‰ø°È†ºÊÄß„Å∏„ÅÆÂΩ±Èüø');
            }
            
            if (brandRisk >= 80) {
                return `„Éñ„É©„É≥„Éâ„É™„Çπ„ÇØ„Çπ„Ç≥„Ç¢${brandRisk}/100„ÅØÊ•µ„ÇÅ„Å¶È´ò„ÅÑ„Éñ„É©„É≥„ÉâÊØÄÊêç„ÅÆÂèØËÉΩÊÄß„ÇíÁ§∫„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ${brandIssues.length > 0 ? brandIssues.join('„ÄÅ') + '„ÅåÊá∏Âøµ„Åï„Çå„Åæ„Åô„ÄÇ' : ''}‰ºÅÊ•≠„ÅÆ‰ø°È†ºÊÄß„Å´Ê∑±Âàª„Å™ÊâìÊíÉ„Çí‰∏é„Åà„ÇãÂç±Èô∫ÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ`;
            } else if (brandRisk >= 60) {
                return `„Éñ„É©„É≥„Éâ„É™„Çπ„ÇØ„Çπ„Ç≥„Ç¢${brandRisk}/100„ÅØÈ´ò„ÅÑ„Éñ„É©„É≥„ÉâÊØÄÊêç„ÅÆÂèØËÉΩÊÄß„ÇíÁ§∫„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ${brandIssues.length > 0 ? brandIssues.join('„ÄÅ') + '„ÅåÊá∏Âøµ„Åï„Çå„Åæ„Åô„ÄÇ' : ''}Â∫ÉÂ†±Êà¶Áï•„ÅÆË¶ãÁõ¥„Åó„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ`;
            } else if (brandRisk >= 40) {
                return `„Éñ„É©„É≥„Éâ„É™„Çπ„ÇØ„Çπ„Ç≥„Ç¢${brandRisk}/100„ÅØ‰∏≠Á®ãÂ∫¶„ÅÆ„Éñ„É©„É≥„ÉâÊØÄÊêç„ÅÆÂèØËÉΩÊÄß„ÇíÁ§∫„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ${brandIssues.length > 0 ? brandIssues.join('„ÄÅ') + '„Å´Ê≥®ÊÑè„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ' : ''}„Éñ„É©„É≥„ÉâÁõ£Ë¶ñ„ÅÆÂº∑Âåñ„ÇíÊé®Â•®„Åó„Åæ„Åô„ÄÇ`;
            } else {
                return `„Éñ„É©„É≥„Éâ„É™„Çπ„ÇØ„Çπ„Ç≥„Ç¢${brandRisk}/100„ÅØ‰Ωé„ÅÑ„Éñ„É©„É≥„ÉâÊØÄÊêç„ÅÆÂèØËÉΩÊÄß„ÇíÁ§∫„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇÁèæÁä∂„Åß„ÅØÂ§ß„Åç„Å™„Éñ„É©„É≥„ÉâÂΩ±Èüø„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„Åå„ÄÅÁ∂ôÁ∂öÁöÑ„Å™„Éñ„É©„É≥„ÉâÁõ£Ë¶ñ„ÅåÈáçË¶Å„Åß„Åô„ÄÇ`;
            }
        }

        // Á§æ‰ºöÁöÑ„É™„Çπ„ÇØÂàÜÊûê
        function getSocialRiskAnalysis(text, riskScore) {
            const socialRisk = riskScore.social_risk;
            const socialIssues = [];
            
            if (text.includes('Á§æ‰ºö') || text.includes('‰∏ñË´ñ')) {
                socialIssues.push('Á§æ‰ºöÂïèÈ°åÂåñ„ÅÆÂèØËÉΩÊÄß');
            }
            if (text.includes('ÁÇé‰∏ä') || text.includes('Êã°Êï£')) {
                socialIssues.push('ÁÇé‰∏äÊã°Êï£„ÅÆÂèØËÉΩÊÄß');
            }
            if (text.includes('SNS') || text.includes('„ÇΩ„Éº„Ç∑„É£„É´')) {
                socialIssues.push('SNS„Åß„ÅÆÊã°Êï£„É™„Çπ„ÇØ');
            }
            
            if (socialRisk >= 80) {
                return `Á§æ‰ºöÁöÑ„É™„Çπ„ÇØ„Çπ„Ç≥„Ç¢${socialRisk}/100„ÅØÊ•µ„ÇÅ„Å¶È´ò„ÅÑÁ§æ‰ºöÂïèÈ°åÂåñ„ÅÆÂèØËÉΩÊÄß„ÇíÁ§∫„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ${socialIssues.length > 0 ? socialIssues.join('„ÄÅ') + '„ÅåÊá∏Âøµ„Åï„Çå„Åæ„Åô„ÄÇ' : ''}SNSÁ≠â„Åß„ÅÆÊÄ•ÈÄü„Å™Êã°Êï£„Å´„Çà„Çä„ÄÅÂ§ß„Åç„Å™Á§æ‰ºöÂïèÈ°å„Å´Áô∫Â±ï„Åô„ÇãÂç±Èô∫ÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ`;
            } else if (socialRisk >= 60) {
                return `Á§æ‰ºöÁöÑ„É™„Çπ„ÇØ„Çπ„Ç≥„Ç¢${socialRisk}/100„ÅØÈ´ò„ÅÑÁ§æ‰ºöÂïèÈ°åÂåñ„ÅÆÂèØËÉΩÊÄß„ÇíÁ§∫„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ${socialIssues.length > 0 ? socialIssues.join('„ÄÅ') + '„ÅåÊá∏Âøµ„Åï„Çå„Åæ„Åô„ÄÇ' : ''}SNSÁõ£Ë¶ñ‰ΩìÂà∂„ÅÆÂº∑Âåñ„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ`;
            } else if (socialRisk >= 40) {
                return `Á§æ‰ºöÁöÑ„É™„Çπ„ÇØ„Çπ„Ç≥„Ç¢${socialRisk}/100„ÅØ‰∏≠Á®ãÂ∫¶„ÅÆÁ§æ‰ºöÂïèÈ°åÂåñ„ÅÆÂèØËÉΩÊÄß„ÇíÁ§∫„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ${socialIssues.length > 0 ? socialIssues.join('„ÄÅ') + '„Å´Ê≥®ÊÑè„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ' : ''}Á∂ôÁ∂öÁöÑ„Å™Á§æ‰ºöÂãïÂêë„ÅÆÁõ£Ë¶ñ„ÅåÈáçË¶Å„Åß„Åô„ÄÇ`;
            } else {
                return `Á§æ‰ºöÁöÑ„É™„Çπ„ÇØ„Çπ„Ç≥„Ç¢${socialRisk}/100„ÅØ‰Ωé„ÅÑÁ§æ‰ºöÂïèÈ°åÂåñ„ÅÆÂèØËÉΩÊÄß„ÇíÁ§∫„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇÁèæÁä∂„Åß„ÅØÂ§ß„Åç„Å™Á§æ‰ºöÁöÑÂΩ±Èüø„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„Åå„ÄÅÁ∂ôÁ∂öÁöÑ„Å™Á§æ‰ºöÂãïÂêë„ÅÆÁõ£Ë¶ñ„ÅåÈáçË¶Å„Åß„Åô„ÄÇ`;
            }
        }

        // „É™„Çπ„ÇØË¶ÅÂõ†„ÅÆÂàÜÊûê
        function analyzeRiskFactors(text, riskScore) {
            const factors = [];
            
            if (text.includes('Â∑ÆÂà•') || text.includes('ÂÅèË¶ã')) {
                factors.push('Â∑ÆÂà•ÁöÑË°®Áèæ„ÅÆ‰ΩøÁî®');
            }
            if (text.includes('ÊîªÊíÉ') || text.includes('Êö¥ÂäõÁöÑ')) {
                factors.push('ÊîªÊíÉÁöÑ„Åæ„Åü„ÅØÊö¥ÂäõÁöÑ„Å™Ë°®Áèæ');
            }
            if (text.includes('‰∏çÈÅ©Âàá') || text.includes('ÂïèÈ°å')) {
                factors.push('‰∏çÈÅ©Âàá„Å™Ë°®Áèæ„ÅÆ‰ΩøÁî®');
            }
            if (text.includes('Ë™πË¨ó') || text.includes('‰∏≠ÂÇ∑')) {
                factors.push('Ë™πË¨ó‰∏≠ÂÇ∑„ÅÆÂèØËÉΩÊÄß');
            }
            if (text.includes('‰æÆËæ±') || text.includes('ËªΩË¶ñ')) {
                factors.push('‰æÆËæ±ÁöÑ„Å™Ë°®Áèæ');
            }
            if (text.includes('‰ºÅÊ•≠') || text.includes('‰ºöÁ§æ')) {
                factors.push('‰ºÅÊ•≠„Éñ„É©„É≥„Éâ„Å∏„ÅÆÂΩ±Èüø');
            }
            if (text.includes('Á§æ‰ºö') || text.includes('‰∏ñË´ñ')) {
                factors.push('Á§æ‰ºöÁöÑÂΩ±Èüø„ÅÆÂèØËÉΩÊÄß');
            }
            
            // „Çπ„Ç≥„Ç¢„Å´Âü∫„Å•„ÅèËøΩÂä†Ë¶ÅÂõ†
            if (riskScore.overall_score >= 80) {
                factors.push('Ê•µ„ÇÅ„Å¶È´ò„ÅÑÁÇé‰∏ä„É™„Çπ„ÇØ');
                factors.push('Âç≥Â∫ß„ÅÆÂØæÂøú„ÅåÂøÖË¶Å');
            } else if (riskScore.overall_score >= 60) {
                factors.push('È´ò„ÅÑÁÇé‰∏ä„É™„Çπ„ÇØ');
                factors.push('ÊÖéÈáç„Å™Ê§úË®é„ÅåÂøÖË¶Å');
            }
            
            // „Éá„Éï„Ç©„É´„Éà„ÅÆË¶ÅÂõ†
            if (factors.length === 0) {
                factors.push('Ë°®Áèæ„ÅÆÈÅ©ÂàáÊÄß„ÅÆÊ§úË®º„ÅåÂøÖË¶Å');
                factors.push('ÊΩúÂú®ÁöÑ„É™„Çπ„ÇØ„ÅÆË©ï‰æ°„ÅåÂøÖË¶Å');
            }
            
            return factors;
        }

        // „Ç´„ÉÜ„Ç¥„É™„ÅÆË™¨Êòé
        function getCategoryExplanation(category) {
            const explanations = {
                'Â∑ÆÂà•ÁöÑË°®Áèæ': 'ÁâπÂÆö„ÅÆÂ±ûÊÄß„ÇÑ„Ç∞„É´„Éº„Éó„Å´ÂØæ„Åô„ÇãÂ∑ÆÂà•ÁöÑ„Å™Ë°®Áèæ„ÅåÂê´„Åæ„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇÁ§æ‰ºöÁöÑ„Å´ÂïèÈ°å„Å®„Å™„ÇãÂèØËÉΩÊÄß„ÅåÈ´ò„Åè„ÄÅÊ≥ïÁöÑË≤¨‰ªª„ÇÇÂïè„Çè„Çå„ÇãÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ',
                'Ë™πË¨ó‰∏≠ÂÇ∑': 'ÂÄã‰∫∫„ÇÑÂõ£‰Ωì„Å´ÂØæ„Åô„ÇãË™πË¨ó‰∏≠ÂÇ∑„ÅÆÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇÂêçË™âÊØÄÊêçÁΩ™„ÇÑ‰æÆËæ±ÁΩ™„Å´Âïè„Çè„Çå„ÇãÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ',
                'ÂÄã‰∫∫ÊÉÖÂ†±ÊºèÊ¥©': 'ÂÄã‰∫∫ÊÉÖÂ†±„ÅÆÊºèÊ¥©„ÇÑ„Éó„É©„Ç§„Éê„Ç∑„Éº„ÅÆ‰æµÂÆ≥„ÅÆÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇÂÄã‰∫∫ÊÉÖÂ†±‰øùË≠∑Ê≥ïÈÅïÂèç„ÅÆÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ',
                'Âä¥ÂÉçÂïèÈ°å': 'Âä¥ÂÉçÁí∞Â¢É„ÇÑÈõáÁî®„Å´Èñ¢„Åô„ÇãÂïèÈ°å„ÅåÂê´„Åæ„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇÂä¥ÂÉçÂü∫Ê∫ñÊ≥ïÈÅïÂèç„ÅÆÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ',
                'Á§æ‰ºöÁöÑË≤¨‰ªª„ÅÆÊ¨†Â¶Ç': '‰ºÅÊ•≠„ÅÆÁ§æ‰ºöÁöÑË≤¨‰ªª„Å´ÂØæ„Åô„ÇãË™çË≠ò„Åå‰∏çË∂≥„Åó„Å¶„ÅÑ„ÇãÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇCSRÔºà‰ºÅÊ•≠„ÅÆÁ§æ‰ºöÁöÑË≤¨‰ªªÔºâ„ÅÆË¶≥ÁÇπ„Åã„ÇâÂïèÈ°å„Å®„Å™„ÇãÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ',
                'ÊÉÖÂ†±Èö†ËîΩ': 'ÈáçË¶Å„Å™ÊÉÖÂ†±„ÅÆÈö†ËîΩ„ÇÑ‰∏çÈÄèÊòé„Å™ÂØæÂøú„ÅåÂê´„Åæ„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ‰ºÅÊ•≠„ÅÆÈÄèÊòéÊÄß„Å´ÂØæ„Åô„ÇãÁñëÂïè„ÇíÊãõ„ÅèÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ',
                '‰∏çÈÅ©Âàá„Å™Ë°®Áèæ': 'Á§æ‰ºöÁöÑ„Å´‰∏çÈÅ©Âàá„Å®„Åï„Çå„ÇãË°®Áèæ„ÅåÂê´„Åæ„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ‰ºÅÊ•≠„ÅÆ‰ø°È†ºÊÄß„Å´ÂΩ±Èüø„Çí‰∏é„Åà„ÇãÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ',
                '‰∏çË¨πÊÖé„Å™Ë°®Áèæ': '‰∏çË¨πÊÖé„ÅßÈÖçÊÖÆ„Å´Ê¨†„Åë„ÇãË°®Áèæ„ÅåÂê´„Åæ„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇÁ§æ‰ºöÁöÑ„Å™ÊâπÂà§„ÇíÊãõ„ÅèÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ',
                'Á§æ‰ºöÂïèÈ°å„Å∏„ÅÆÂÅèË¶ã': 'Á§æ‰ºöÂïèÈ°å„Å´ÂØæ„Åô„ÇãÂÅèË¶ã„ÇÑÂÅè„Å£„ÅüË¶ãËß£„ÅåÂê´„Åæ„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇÁ§æ‰ºö„ÅÆÂ§öÊßòÊÄß„Å´ÂØæ„Åô„ÇãÁêÜËß£‰∏çË∂≥„ÇíÁ§∫„ÅôÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ',
                'Ë∂£Âë≥ÂóúÂ•Ω„Å∏„ÅÆÂ∑ÆÂà•': 'ÁâπÂÆö„ÅÆË∂£Âë≥„ÇÑÂóúÂ•Ω„Å´ÂØæ„Åô„ÇãÂ∑ÆÂà•ÁöÑ„Å™Ë°®Áèæ„ÅåÂê´„Åæ„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇÂÄã‰∫∫„ÅÆËá™Áî±„Å™ÈÅ∏Êäû„Å´ÂØæ„Åô„ÇãÂ∞äÈáç„Åå‰∏çË∂≥„Åó„Å¶„ÅÑ„ÇãÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ'
            };
            return explanations[category] || 'ÊäïÁ®øÂÜÖÂÆπ„Å´ÂïèÈ°å„Å®„Å™„ÇãË¶ÅÁ¥†„ÅåÂê´„Åæ„Çå„Å¶„ÅÑ„ÇãÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ';
        }

        // È°û‰ºº‰∫ã‰æã„Å®„ÅÆÊØîËºÉ
        function getCaseComparison(relatedCases) {
            if (relatedCases.length === 0) {
                return 'È°û‰ºº„Åô„ÇãÁÇé‰∏ä‰∫ã‰æã„ÅØË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ„Åü„Å†„Åó„ÄÅÊäïÁ®øÂÜÖÂÆπ„ÅÆÁâπÂæ¥„Åã„Çâ„ÄÅÈÅéÂéª„ÅÆÁÇé‰∏ä‰∫ã‰æã„Å®ÂêåÊßò„ÅÆ„É™„Çπ„ÇØ„Éë„Çø„Éº„É≥„ÅåÂ≠òÂú®„Åô„ÇãÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ';
            }
            
            const caseCount = relatedCases.length;
            const categories = [...new Set(relatedCases.map(case_ => case_.cause_category))];
            const avgImpact = relatedCases.reduce((sum, case_) => sum + (case_.social_impact_score || 50), 0) / caseCount;
            
            return `ÈÅéÂéª„ÅÆ${caseCount}‰ª∂„ÅÆÈ°û‰ººÁÇé‰∏ä‰∫ã‰æã„ÇíÂàÜÊûê„Åó„ÅüÁµêÊûú„ÄÅ${categories.join('„ÄÅ')}„Å™„Å©„ÅÆÂéüÂõ†„Ç´„ÉÜ„Ç¥„É™„ÅåÁ¢∫Ë™ç„Åï„Çå„Åæ„Åó„Åü„ÄÇÂπ≥ÂùáÁöÑ„Å™Á§æ‰ºöÁöÑÂΩ±ÈüøÂ∫¶„ÅØ${Math.round(avgImpact)}/100„Åß„ÄÅ${avgImpact >= 70 ? 'È´ò„ÅÑ' : avgImpact >= 50 ? '‰∏≠Á®ãÂ∫¶„ÅÆ' : '‰Ωé„ÅÑ'}ÂΩ±Èüø„Åå‰∫àÊÉ≥„Åï„Çå„Åæ„Åô„ÄÇ„Åì„Çå„Çâ„ÅÆ‰∫ã‰æã„ÅÆÁµêÊûú„ÇíÂèÇËÄÉ„Å´„ÄÅÈÅ©Âàá„Å™ÂØæÂøúÁ≠ñ„ÇíË¨õ„Åò„Çã„Åì„Å®„ÅåÈáçË¶Å„Åß„Åô„ÄÇ`;
        }


        // ‰øÆÊ≠£Ê°à„ÅÆÊèêÊ°à
        function getRevisionSuggestion(text, riskScore) {
            const overallRisk = riskScore.overall_score;
            
            if (overallRisk >= 80) {
                return `Á∑èÂêà„Çπ„Ç≥„Ç¢${overallRisk}/100„ÅØÊ•µ„ÇÅ„Å¶È´ò„ÅÑ„É™„Çπ„ÇØ„ÇíÁ§∫„Åó„Å¶„ÅÑ„Çã„Åü„ÇÅ„ÄÅÊäïÁ®øÂÜÖÂÆπ„ÅÆÂÖ®Èù¢ÁöÑ„Å™Ë¶ãÁõ¥„Åó„ÅåÂøÖË¶Å„Åß„Åô„ÄÇÂ∑ÆÂà•ÁöÑ„ÄÅÊîªÊíÉÁöÑ„ÄÅ„Åæ„Åü„ÅØ‰∏çÈÅ©Âàá„Å™Ë°®Áèæ„ÇíÂÆåÂÖ®„Å´Èô§Âéª„Åó„ÄÅ„Çà„ÇäÂª∫Ë®≠ÁöÑ„ÅßÈÅ©Âàá„Å™Ë°®Áèæ„Å´Â§âÊõ¥„Åô„Çã„Åì„Å®„ÇíÂº∑„ÅèÊé®Â•®„Åó„Åæ„Åô„ÄÇÂÖ∑‰ΩìÁöÑ„Å™‰øÆÊ≠£Ê°à„Å´„Å§„ÅÑ„Å¶„ÅØ„ÄÅÊ≥ïÂãôÈÉ®ÈñÄ„ÇÑPRÂ∞ÇÈñÄÂÆ∂„Å®„ÅÆÁõ∏Ë´á„ÇíÊé®Â•®„Åó„Åæ„Åô„ÄÇ`;
            } else if (overallRisk >= 60) {
                return `Á∑èÂêà„Çπ„Ç≥„Ç¢${overallRisk}/100„ÅØÈ´ò„ÅÑ„É™„Çπ„ÇØ„ÇíÁ§∫„Åó„Å¶„ÅÑ„Çã„Åü„ÇÅ„ÄÅÊäïÁ®øÂÜÖÂÆπ„ÅÆ‰∏ÄÈÉ®‰øÆÊ≠£„ÅåÂøÖË¶Å„Åß„Åô„ÄÇÂïèÈ°å„Å®„Å™„ÇãË°®Áèæ„ÇíÁâπÂÆö„Åó„ÄÅ„Çà„ÇäÈÅ©Âàá„ÅßÂª∫Ë®≠ÁöÑ„Å™Ë°®Áèæ„Å´Â§âÊõ¥„Åô„Çã„Åì„Å®„ÇíÊé®Â•®„Åó„Åæ„Åô„ÄÇ‰øÆÊ≠£Âæå„ÅØÂÜçÂ∫¶„É™„Çπ„ÇØÂàÜÊûê„ÇíË°å„ÅÜ„Åì„Å®„Çí„ÅäÂãß„ÇÅ„Åó„Åæ„Åô„ÄÇ`;
            } else if (overallRisk >= 40) {
                return `Á∑èÂêà„Çπ„Ç≥„Ç¢${overallRisk}/100„ÅØ‰∏≠Á®ãÂ∫¶„ÅÆ„É™„Çπ„ÇØ„ÇíÁ§∫„Åó„Å¶„ÅÑ„Çã„Åü„ÇÅ„ÄÅËªΩÂæÆ„Å™‰øÆÊ≠£„ÇíÊ§úË®é„Åô„Çã„Åì„Å®„Çí„ÅäÂãß„ÇÅ„Åó„Åæ„Åô„ÄÇ‰∏ÄÈÉ®„ÅÆË°®Áèæ„Çí„Çà„ÇäÈÅ©Âàá„Å™„ÇÇ„ÅÆ„Å´Â§âÊõ¥„Åô„Çã„Åì„Å®„Åß„ÄÅ„É™„Çπ„ÇØ„Çí„Åï„Çâ„Å´‰ΩéÊ∏õ„Åß„Åç„ÇãÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ`;
            } else {
                return `Á∑èÂêà„Çπ„Ç≥„Ç¢${overallRisk}/100„ÅØ‰Ωé„ÅÑ„É™„Çπ„ÇØ„ÇíÁ§∫„Åó„Å¶„ÅÑ„Çã„Åü„ÇÅ„ÄÅÁèæÁä∂„Åß„ÅØÂ§ß„Åç„Å™‰øÆÊ≠£„ÅØ‰∏çË¶Å„Åß„Åô„ÄÇ„Åü„Å†„Åó„ÄÅ„Çà„ÇäÂÆâÂÖ®„Å™Ë°®Áèæ„Å´Â§âÊõ¥„Åô„Çã„Åì„Å®„Åß„ÄÅ„É™„Çπ„ÇØ„Çí„Åï„Çâ„Å´‰ΩéÊ∏õ„Åß„Åç„ÇãÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ`;
            }
        }

        // ÁµêË´ñ
        function getConclusion(riskScore) {
            const overallRisk = riskScore.overall_score;
            const confidence = riskScore.confidence;
            
            if (overallRisk >= 80) {
                return `„Åì„ÅÆÊäïÁ®ø„ÅØ„ÄÅÁ∑èÂêà„Çπ„Ç≥„Ç¢${overallRisk}/100„Å®„ÅÑ„ÅÜÊ•µ„ÇÅ„Å¶È´ò„ÅÑ„É™„Çπ„ÇØ„ÇíÂ≠ï„Çì„Åß„ÅÑ„Åæ„Åô„ÄÇÂàÜÊûê‰ø°È†ºÂ∫¶${confidence}%„Å´Âü∫„Å•„Åç„ÄÅÂç≥Â∫ß„ÅÆÂØæÂøú„ÅåÂøÖË¶Å„Åß„Åô„ÄÇËøÖÈÄü„Åã„Å§ÈÅ©Âàá„Å™ÂØæÂøú„ÇíË°å„ÅÜ„Åì„Å®„Åå„ÄÅ‰ºÅÊ•≠„ÅÆÂ≠òÁ∂ö„Å´Èñ¢„Çè„ÇãÈáçÂ§ß„Å™ÂïèÈ°å„Åß„Åô„ÄÇÊäïÁ®ø„ÅÆÂâäÈô§„ÄÅË¨ùÁΩ™Êñá„ÅÆÁô∫Ë°®„ÄÅÂÜçÁô∫Èò≤Ê≠¢Á≠ñ„ÅÆÁ≠ñÂÆö„Å™„Å©„ÄÅÂåÖÊã¨ÁöÑ„Å™ÂØæÂøú„ÅåÊ±Ç„ÇÅ„Çâ„Çå„Åæ„Åô„ÄÇ`;
            } else if (overallRisk >= 60) {
                return `„Åì„ÅÆÊäïÁ®ø„ÅØ„ÄÅÁ∑èÂêà„Çπ„Ç≥„Ç¢${overallRisk}/100„Å®„ÅÑ„ÅÜÈ´ò„ÅÑ„É™„Çπ„ÇØ„ÇíÂ≠ï„Çì„Åß„ÅÑ„Åæ„Åô„ÄÇÂàÜÊûê‰ø°È†ºÂ∫¶${confidence}%„Å´Âü∫„Å•„Åç„ÄÅÊÖéÈáç„Å™Ê§úË®é„Å®ÈÅ©Âàá„Å™ÂØæÂøú„ÅåÊ±Ç„ÇÅ„Çâ„Çå„Åæ„Åô„ÄÇÊäïÁ®øÂâç„ÅÆÂÜÖÂÆπË¶ãÁõ¥„Åó„ÄÅÊ≥ïÂãôÁ¢∫Ë™ç„ÄÅÂ∫ÉÂ†±Êà¶Áï•„ÅÆÊ§úË®é„Å™„Å©„ÄÅ„É™„Çπ„ÇØ„ÇíÊúÄÂ∞èÂåñ„Åô„Çã„Åü„ÇÅ„ÅÆÂØæÁ≠ñ„ÅåÈáçË¶Å„Åß„Åô„ÄÇ`;
            } else if (overallRisk >= 40) {
                return `„Åì„ÅÆÊäïÁ®ø„ÅØ„ÄÅÁ∑èÂêà„Çπ„Ç≥„Ç¢${overallRisk}/100„Å®„ÅÑ„ÅÜ‰∏≠Á®ãÂ∫¶„ÅÆ„É™„Çπ„ÇØ„ÇíÂ≠ï„Çì„Åß„ÅÑ„Åæ„Åô„ÄÇÂàÜÊûê‰ø°È†ºÂ∫¶${confidence}%„Å´Âü∫„Å•„Åç„ÄÅ‰∏ÄÈÉ®„ÅÆË°®Áèæ„Å´Ê≥®ÊÑè„ÅåÂøÖË¶Å„Åß„Åô„ÄÇËªΩÂæÆ„Å™‰øÆÊ≠£„Å´„Çà„Çä„ÄÅ„É™„Çπ„ÇØ„Çí„Åï„Çâ„Å´‰ΩéÊ∏õ„Åß„Åç„ÇãÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇÁ∂ôÁ∂öÁöÑ„Å™„É¢„Éã„Çø„É™„É≥„Ç∞„Å®ÈÅ©Âàá„Å™ÂØæÂøú„ÅåÈáçË¶Å„Åß„Åô„ÄÇ`;
            } else {
                return `„Åì„ÅÆÊäïÁ®ø„ÅØ„ÄÅÁ∑èÂêà„Çπ„Ç≥„Ç¢${overallRisk}/100„Å®„ÅÑ„ÅÜ‰Ωé„ÅÑ„É™„Çπ„ÇØ„ÇíÁ§∫„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇÂàÜÊûê‰ø°È†ºÂ∫¶${confidence}%„Å´Âü∫„Å•„Åç„ÄÅÁèæÁä∂„Åß„ÅØÂ§ß„Åç„Å™ÂïèÈ°å„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„Åå„ÄÅÁ∂ôÁ∂öÁöÑ„Å™„É¢„Éã„Çø„É™„É≥„Ç∞„Å®ÈÅ©Âàá„Å™ÂØæÂøú„ÅåÈáçË¶Å„Åß„Åô„ÄÇ‰ºÅÊ•≠„ÅÆ‰ø°È†ºÊÄßÁ∂≠ÊåÅ„Å®„É™„Çπ„ÇØÁÆ°ÁêÜ„Å´„Åä„ÅÑ„Å¶„ÄÅ‰∫àÈò≤ÁöÑ„Å™„Ç¢„Éó„É≠„Éº„ÉÅ„ÇíÁ∂ôÁ∂ö„Åô„Çã„Åì„Å®„ÅåÊé®Â•®„Åï„Çå„Åæ„Åô„ÄÇ`;
            }
        }

        // Èñ¢ÈÄ£‰∫ã‰æã„ÅÆË°®Á§∫
        function displayRelatedCases(cases, riskLevel) {
            if (cases.length === 0) {
                if (riskLevel === 'ÊäïÁ®øÂèØ') {
                    relatedCasesTitle.textContent = 'ÂÆâÂÖ®„Å™ÊäïÁ®ø„ÅÆ„Éô„Çπ„Éà„Éó„É©„ÇØ„ÉÜ„Ç£„Çπ';
                    relatedCasesList.innerHTML = `
                        <div class="case-item">
                            <div class="case-title">ÈÅ©Âàá„Å™Ë°®Áèæ„ÅÆ‰ΩøÁî®</div>
                            <div class="case-description">ÁèæÂú®„ÅÆÂÜÖÂÆπ„ÅØÈÅ©Âàá„Å™Ë°®Áèæ„Åå‰ΩøÁî®„Åï„Çå„Å¶„Åä„Çä„ÄÅÂÆâÂÖ®„Å´ÊäïÁ®ø„Åß„Åç„Åæ„Åô„ÄÇ‰ªäÂæå„ÇÇ„Åì„ÅÆ„Çà„ÅÜ„Å™ÈÖçÊÖÆ„ÅÆ„ÅÇ„ÇãË°®Áèæ„ÇíÂøÉ„Åå„Åë„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ</div>
                        </div>
                        <div class="case-item">
                            <div class="case-title">Á∂ôÁ∂öÁöÑ„Å™„É™„Çπ„ÇØÁÆ°ÁêÜ</div>
                            <div class="case-description">ÂÆöÊúüÁöÑ„Å™„É™„Çπ„ÇØÂàÜÊûê„Å´„Çà„Çä„ÄÅÊäïÁ®øÂâç„ÅÆ„ÉÅ„Çß„ÉÉ„ÇØ‰ΩìÂà∂„ÇíÁ∂≠ÊåÅ„Åó„ÄÅÂÆâÂÖ®„Å™„Ç≥„Éü„É•„Éã„Ç±„Éº„Ç∑„Éß„É≥„ÇíÁ∂ôÁ∂ö„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇ</div>
                        </div>
                    `;
                } else {
                    relatedCasesList.innerHTML = '<p style="text-align: center; color: var(--text-secondary); padding: var(--space-8);">Èñ¢ÈÄ£„Åô„ÇãÈ°û‰ºº‰∫ã‰æã„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ</p>';
                }
                return;
            }

            relatedCasesList.innerHTML = cases.map(case_ => `
                <div class="case-item">
                    <div class="case-title">${case_.title}</div>
                    <div class="case-meta">
                        <i class="fas fa-calendar"></i> ${case_.incident_date} | 
                        <i class="fas fa-building"></i> ${case_.company_info || '‰∏çÊòé'}
                    </div>
                    <div class="case-description">${case_.reasoning_text}</div>
                </div>
            `).join('');
        }

        // „Éû„Éº„ÇØ„ÉÄ„Ç¶„É≥„Åã„ÇâHTML„Å∏„ÅÆÂ§âÊèõ
        function convertMarkdownToHtml(markdown) {
            if (!markdown) return '';
            
            let html = markdown;
            
            // Ë¶ãÂá∫„Åó„ÅÆÂ§âÊèõ
            html = html.replace(/^## (.*$)/gm, '<h3>$1</h3>');
            html = html.replace(/^### (.*$)/gm, '<h4>$1</h4>');
            
            // Â§™Â≠ó„ÅÆÂ§âÊèõ
            html = html.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
            
            // „É™„Çπ„Éà„Ç¢„Ç§„ÉÜ„É†„ÅÆÂ§âÊèõ
            html = html.replace(/^(\s*)\* (.*$)/gm, '$1<li>$2</li>');
            html = html.replace(/^(\s*)- (.*$)/gm, '$1<li>$2</li>');
            
            // ÊÆµËêΩ„Å´ÂàÜÂâ≤
            const lines = html.split('\n');
            let result = '';
            let inList = false;
            
            for (let i = 0; i < lines.length; i++) {
                const line = lines[i].trim();
                
                if (!line) {
                    if (inList) {
                        result += '</ul>';
                        inList = false;
                    }
                    continue;
                }
                
                if (line.startsWith('<h3') || line.startsWith('<h4')) {
                    if (inList) {
                        result += '</ul>';
                        inList = false;
                    }
                    result += line;
                } else if (line.startsWith('<li>')) {
                    if (!inList) {
                        result += '<ul>';
                        inList = true;
                    }
                    result += line;
                } else {
                    if (inList) {
                        result += '</ul>';
                        inList = false;
                    }
                    result += '<p>' + line + '</p>';
                }
            }
            
            if (inList) {
                result += '</ul>';
            }
            
            return result;
        }

        // ÁµêÊûú„ÅÆË°®Á§∫
        function displayResult(data) {
            // „Çπ„Ç≥„Ç¢Ë°®Á§∫„ÅÆÊõ¥Êñ∞
            updateScoreCircle(data.risk_score.overall_score);
            displayRiskLevel(data.risk_level, data.recommendation);
            displayDetailedScores(data.risk_score);
            displayRecommendations(data.recommendations);
            displayAnalysisText(data.analysis_text, data.risk_score, data.related_cases);
            displayRelatedCases(data.related_cases, data.risk_level);
            
            // ÁµêÊûú„Çª„ÇØ„Ç∑„Éß„É≥„ÅÆË°®Á§∫
            resultSection.style.display = 'block';
            resultSection.classList.add('fade-in');
        }

        // ÂàÜÊûêÂÆüË°å
        analyzeBtn.addEventListener('click', async function() {
            const text = textInput.value.trim();
            
            if (!text) {
                showError('„ÉÜ„Ç≠„Çπ„Éà„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
                return;
            }
            
            if (text.length < 5) {
                showError('„ÉÜ„Ç≠„Çπ„Éà„ÅØ5ÊñáÂ≠ó‰ª•‰∏ä„ÅßÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
                return;
            }
            
            setLoading(true);
            hideError();
            hideResult();
            
            try {
                // Vercel API„ÇíÂëº„Å≥Âá∫„Åó
                const response = await fetch('/analyze', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ text: text })
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                
                // „É™„Çπ„ÇØ„É¨„Éô„É´„ÇíË®àÁÆó
                const riskLevel = data.risk_score.overall_score >= 70 ? 'ÊäïÁ®øÂç±Èô∫' : 
                                 data.risk_score.overall_score >= 40 ? 'Ë¶Å„É¨„Éì„É•„Éº' : 'ÊäïÁ®øÂèØ';
                
                // Êé®Â•®‰∫ãÈ†Ö„ÇíÁîüÊàê
                const recommendations = [];
                if (data.risk_score.overall_score >= 70) {
                    recommendations.push('ÊäïÁ®ø„Çí‰∏≠Ê≠¢„Åó„ÄÅÂÜÖÂÆπ„ÅÆÂÖ®Èù¢ÁöÑ„Å™Ë¶ãÁõ¥„Åó„ÅåÂøÖË¶Å„Åß„Åô');
                    recommendations.push('Ê≥ïÂãôÈÉ®ÈñÄ„Å®„ÅÆÁ∑äÊÄ•Áõ∏Ë´á„ÇíÊé®Â•®„Åó„Åæ„Åô');
                    recommendations.push('Ë¨ùÁΩ™Êñá„ÅÆÊ∫ñÂÇô„ÇíÊ§úË®é„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                } else if (data.risk_score.overall_score >= 40) {
                    recommendations.push('ÊäïÁ®øÂâç„ÅÆÂÜÖÂÆπË¶ãÁõ¥„Åó„ÇíÊé®Â•®„Åó„Åæ„Åô');
                    recommendations.push('‰∏ÄÈÉ®„ÅÆË°®Áèæ„Çí‰øÆÊ≠£„Åô„Çã„Åì„Å®„ÇíÊ§úË®é„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                    recommendations.push('Â∫ÉÂ†±ÈÉ®ÈñÄ„Å®„ÅÆÁõ∏Ë´á„ÇíÊé®Â•®„Åó„Åæ„Åô');
                } else {
                    recommendations.push('ÁèæÂú®„ÅÆÂÜÖÂÆπ„ÅßÂÆâÂÖ®„Å´ÊäïÁ®ø„Åß„Åç„Åæ„Åô');
                    recommendations.push('Á∂ôÁ∂öÁöÑ„Å™„É™„Çπ„ÇØÁÆ°ÁêÜ„ÇíÂøÉ„Åå„Åë„Å¶„Åè„Å†„Åï„ÅÑ');
                }
                
                // Ë°®Á§∫Áî®„Éá„Éº„Çø„ÇíÊ∫ñÂÇô
                const displayData = {
                    ...data,
                    risk_level: riskLevel,
                    recommendations: recommendations
                };
                
                displayResult(displayData);
                
            } catch (error) {
                console.error('Error:', error);
                showError('„Çµ„Éº„Éê„Éº„Å´Êé•Á∂ö„Åß„Åç„Åæ„Åõ„Çì„ÄÇAPI„Çµ„Éº„Éê„Éº„ÅåËµ∑Âãï„Åó„Å¶„ÅÑ„Çã„ÅãÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ');
            } finally {
                setLoading(false);
            }
        });
    </script>
</body>
</html>